<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Spelled Interval and Pitch Arrays &mdash; pitchtypes  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=5929fcd5"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Enharmonic Pitch" href="enharmonic.html" />
    <link rel="prev" title="Spelled Pitch" href="spelled.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            pitchtypes
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="spelled.html">Spelled Pitch</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Spelled Interval and Pitch Arrays</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#array-creation">Array Creation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#from-numeric-arrays">From Numeric Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#from-string-arrays">From String Arrays</a></li>
<li class="toctree-l3"><a class="reference internal" href="#from-arrays-of-pitches-intervals">From Arrays of Pitches / Intervals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shorthands">Shorthands</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-spelled-arrays">Working with Spelled Arrays</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#array-return-values">Array Return Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#names-and-strings">Names and Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#special-intervals">Special Intervals</a></li>
<li class="toctree-l3"><a class="reference internal" href="#array-interface">Array Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#one-hot-encoding">One-hot Encoding</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#reference">Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#general-interface">General Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spelled-interval-and-pitch">Spelled Interval and Pitch</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spelled-interval-and-pitch-class">Spelled Interval and Pitch Class</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="enharmonic.html">Enharmonic Pitch</a></li>
<li class="toctree-l1"><a class="reference internal" href="frequencies.html">Log-Frequency Pitch</a></li>
<li class="toctree-l1"><a class="reference internal" href="harmonic.html">Harmonic Pitch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api_summary.html">API Summary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">pitchtypes</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Spelled Interval and Pitch Arrays</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/types/spelled_array.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="spelled-interval-and-pitch-arrays">
<h1>Spelled Interval and Pitch Arrays<a class="headerlink" href="#spelled-interval-and-pitch-arrays" title="Link to this heading"></a></h1>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>With large datasets, it is often necessary or convenient to represent and process them
in vectorized form, for example in <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays.
Putting spelled pitches or intervals directly in a <code class="docutils literal notranslate"><span class="pre">numpy</span></code> array
does not have any performance benefits
since numpy has no support for the operations between these types.
However, the underlying representation of pitches is numeric and most operations on them
directly translate to arithmetics on the underlying numbers.</p>
<p>This module provides vectorized types for spelled interval and pitch arrays.
They correspond to the types in the <a class="reference internal" href="spelled.html"><span class="doc">pitchtypes.spelled</span></a> module
and generally share the same interface.
Internally, spelled array types use <code class="docutils literal notranslate"><span class="pre">numpy</span></code> arrays to encode their data
and implement all of their arithmetic operations in vectorized form.
The main exception to native vectorization is printing and parsing,
which means that those should be handled with care on large datasets.</p>
</section>
<section id="array-creation">
<h2>Array Creation<a class="headerlink" href="#array-creation" title="Link to this heading"></a></h2>
<section id="from-numeric-arrays">
<h3>From Numeric Arrays<a class="headerlink" href="#from-numeric-arrays" title="Link to this heading"></a></h3>
<p>The most direct way to construct a spelled array is by providing its underlying arrays
of fifths and (dependent) octaves as a numpy array
or something that supports the same interface such as a pandas series.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pitchtypes</span> <span class="kn">import</span> <span class="o">*</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledIntervalClassArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]))</span>
<span class="go">asic([&#39;P5&#39;, &#39;M2&#39;, &#39;M6&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledPitchClassArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">3</span><span class="p">))</span>
<span class="go">aspc([&#39;C&#39;, &#39;G&#39;, &#39;D&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledIntervalArray</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
<span class="go">asi([&#39;P5:0&#39;, &#39;M2:0&#39;, &#39;M6:0&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;fifths&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s1">&#39;octaves&#39;</span><span class="p">:[</span><span class="mi">4</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">]})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledPitchArray</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">fifths</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">octaves</span><span class="p">)</span>
<span class="go">asp([&#39;G4&#39;, &#39;D4&#39;, &#39;A4&#39;])</span>
</pre></div>
</div>
<p>If the data is given using <em>independent</em> octaves
(e.g., derived from the name and octave of a pitch),
intervals and pitches can also be constructed from those using
the class method <code class="docutils literal notranslate"><span class="pre">from_independent(fifths,</span> <span class="pre">octaves)</span></code>.
This is usually more natural for pitches than for intervals</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledPitchArray</span><span class="o">.</span><span class="n">from_independent</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">]))</span>
<span class="go">asp([&#39;G4&#39;, &#39;D4&#39;, &#39;A4&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledIntervalArray</span><span class="o">.</span><span class="n">from_independent</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">]))</span>
<span class="go">asi([&#39;m7:0&#39;, &#39;P4:0&#39;, &#39;P1:0&#39;, &#39;P5:0&#39;, &#39;M2:0&#39;])</span>
</pre></div>
</div>
</section>
<section id="from-string-arrays">
<h3>From String Arrays<a class="headerlink" href="#from-string-arrays" title="Link to this heading"></a></h3>
<p>Spelled arrays can also be created from arrays of strings using the <code class="docutils literal notranslate"><span class="pre">from_strings(strings)</span></code> class method.
Note that the parsing is done entirely in Python and thus can be slow on large datasets.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledIntervalArray</span><span class="o">.</span><span class="n">from_strings</span><span class="p">([</span><span class="s2">&quot;M2:0&quot;</span><span class="p">,</span> <span class="s2">&quot;-P4:1&quot;</span><span class="p">])</span>
<span class="go">asi([&#39;M2:0&#39;, &#39;-P4:1&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledPitchClassArray</span><span class="o">.</span><span class="n">from_strings</span><span class="p">([[</span><span class="s2">&quot;Db&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;D#&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;Eb&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;E#&quot;</span><span class="p">]])</span>
<span class="go">aspc([[&#39;Db&#39;, &#39;D&#39;, &#39;D#&#39;],</span>
<span class="go"> [&#39;Eb&#39;, &#39;E&#39;, &#39;E#&#39;]])</span>
</pre></div>
</div>
</section>
<section id="from-arrays-of-pitches-intervals">
<h3>From Arrays of Pitches / Intervals<a class="headerlink" href="#from-arrays-of-pitches-intervals" title="Link to this heading"></a></h3>
<p>Arrays (or lists) containing pitches or intervals can be converted to the corresponding spelled arrays
using the <code class="docutils literal notranslate"><span class="pre">from_array</span></code> class method:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">SpelledInterval</span><span class="p">(</span><span class="s2">&quot;P1:0&quot;</span><span class="p">),</span> <span class="n">SpelledInterval</span><span class="p">(</span><span class="s2">&quot;P1:1&quot;</span><span class="p">)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span>
<span class="go">array([P1:0, P1:1], dtype=object)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledIntervalArray</span><span class="o">.</span><span class="n">from_array</span><span class="p">(</span><span class="n">intervals</span><span class="p">)</span>
<span class="go">asi([&#39;P1:0&#39;, &#39;P1:1&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledPitchArray</span><span class="o">.</span><span class="n">from_array</span><span class="p">([</span><span class="n">SpelledPitch</span><span class="p">(</span><span class="s2">&quot;C4&quot;</span><span class="p">),</span> <span class="n">SpelledPitch</span><span class="p">(</span><span class="s2">&quot;C5&quot;</span><span class="p">)])</span>
<span class="go">asp([&#39;C4&#39;, &#39;C5&#39;])</span>
</pre></div>
</div>
</section>
<section id="shorthands">
<h3>Shorthands<a class="headerlink" href="#shorthands" title="Link to this heading"></a></h3>
<p>When writing code that uses spelled array types,
you should generally use one of the above methods for creating spelled arrays,
as they make the intention of the code clear.
However, for quickly testing or trying something in an interactive way,
there are shortcut functions that accept arrays or nested lists
of strings, scalar spelled types, and numeric fifths/octaves values.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">asi</span><span class="p">([</span><span class="s2">&quot;aaa1:1&quot;</span><span class="p">])</span>
<span class="go">asi([&#39;aaa1:1&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asi</span><span class="p">([</span><span class="n">SpelledInterval</span><span class="p">(</span><span class="s2">&quot;aaa1:1&quot;</span><span class="p">)])</span>
<span class="go">asi([&#39;aaa1:1&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asi</span><span class="p">([</span><span class="mi">21</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">11</span><span class="p">])</span>
<span class="go">asi([&#39;aaa1:1&#39;])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">asic</span><span class="p">([</span><span class="n">SpelledIntervalClass</span><span class="p">(</span><span class="s2">&quot;aaa1&quot;</span><span class="p">)])</span>
<span class="go">asic([&#39;aaa1&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asic</span><span class="p">([</span><span class="s2">&quot;aaa1&quot;</span><span class="p">])</span>
<span class="go">asic([&#39;aaa1&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asic</span><span class="p">([</span><span class="mi">21</span><span class="p">])</span>
<span class="go">asic([&#39;aaa1&#39;])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">asp</span><span class="p">([</span><span class="s2">&quot;A##4&quot;</span><span class="p">,</span> <span class="s2">&quot;C5&quot;</span><span class="p">])</span>
<span class="go">asp([&#39;A##4&#39;, &#39;C5&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asp</span><span class="p">([</span><span class="n">SpelledPitch</span><span class="p">(</span><span class="s2">&quot;A##4&quot;</span><span class="p">),</span> <span class="n">SpelledPitch</span><span class="p">(</span><span class="s2">&quot;C5&quot;</span><span class="p">)])</span>
<span class="go">asp([&#39;A##4&#39;, &#39;C5&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asp</span><span class="p">([</span><span class="mi">17</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
<span class="go">asp([&#39;A##4&#39;, &#39;C5&#39;])</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">aspc</span><span class="p">([</span><span class="s2">&quot;A##&quot;</span><span class="p">,</span> <span class="s2">&quot;C&quot;</span><span class="p">])</span>
<span class="go">aspc([&#39;A##&#39;, &#39;C&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aspc</span><span class="p">([</span><span class="n">SpelledPitchClass</span><span class="p">(</span><span class="s2">&quot;A##&quot;</span><span class="p">),</span> <span class="n">SpelledPitchClass</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)])</span>
<span class="go">aspc([&#39;A##&#39;, &#39;C&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aspc</span><span class="p">([</span><span class="mi">17</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">aspc([&#39;A##&#39;, &#39;C&#39;])</span>
</pre></div>
</div>
</section>
</section>
<section id="working-with-spelled-arrays">
<h2>Working with Spelled Arrays<a class="headerlink" href="#working-with-spelled-arrays" title="Link to this heading"></a></h2>
<section id="array-return-values">
<h3>Array Return Values<a class="headerlink" href="#array-return-values" title="Link to this heading"></a></h3>
<p>Most methods on spelled arrays now return either another spelled array
or an array or numbers or strings:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">asi</span><span class="p">([</span><span class="s2">&quot;P1:0&quot;</span><span class="p">,</span> <span class="s2">&quot;M3:0&quot;</span><span class="p">,</span> <span class="s2">&quot;-m2:1&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">direction</span><span class="p">()</span>
<span class="go">array([ 0,  1, -1])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">asi</span><span class="p">([</span><span class="s2">&quot;P1:0&quot;</span><span class="p">,</span> <span class="s2">&quot;M3:0&quot;</span><span class="p">,</span> <span class="s2">&quot;-m2:1&quot;</span><span class="p">]))</span>
<span class="go">asi([&#39;P1:0&#39;, &#39;M3:0&#39;, &#39;m2:1&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cs</span> <span class="o">=</span> <span class="n">aspc</span><span class="p">([</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;C#&quot;</span><span class="p">,</span> <span class="s2">&quot;C##&quot;</span><span class="p">,</span> <span class="s2">&quot;Cb&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cs</span><span class="o">.</span><span class="n">alteration</span><span class="p">()</span>
<span class="go">array([ 0,  1,  2, -1])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cs</span><span class="o">.</span><span class="n">degree</span><span class="p">()</span>
<span class="go">array([0, 0, 0, 0])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cs</span><span class="o">.</span><span class="n">letter</span><span class="p">()</span>
<span class="go">array([&#39;C&#39;, &#39;C&#39;, &#39;C&#39;, &#39;C&#39;], dtype=&#39;&lt;U1&#39;)</span>
</pre></div>
</div>
<p>Comparison also works element-wise:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">asi</span><span class="p">([</span><span class="s2">&quot;M2:0&quot;</span><span class="p">,</span> <span class="s2">&quot;d5:0&quot;</span><span class="p">,</span> <span class="s2">&quot;-P5:0&quot;</span><span class="p">])</span> <span class="o">&gt;</span> <span class="n">asi</span><span class="p">([</span><span class="s2">&quot;m2:0&quot;</span><span class="p">,</span> <span class="s2">&quot;a4:0&quot;</span><span class="p">,</span> <span class="s2">&quot;-P4:0&quot;</span><span class="p">])</span>
<span class="go">array([ True,  True, False])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asic</span><span class="p">([</span><span class="s2">&quot;M2&quot;</span><span class="p">,</span> <span class="s2">&quot;-m7&quot;</span><span class="p">,</span> <span class="s2">&quot;m2&quot;</span><span class="p">])</span> <span class="o">==</span> <span class="n">SpelledIntervalClass</span><span class="p">(</span><span class="s2">&quot;M2&quot;</span><span class="p">)</span>
<span class="go">array([ True,  True, False])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">asp</span><span class="p">([</span><span class="s2">&quot;C4&quot;</span><span class="p">,</span> <span class="s2">&quot;B###3&quot;</span><span class="p">,</span> <span class="s2">&quot;Dbbb4&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">compare</span><span class="p">(</span><span class="n">SpelledPitch</span><span class="p">(</span><span class="s2">&quot;C4&quot;</span><span class="p">))</span>
<span class="go">array([ 0, -1,  1])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aspc</span><span class="p">([</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;C#&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">array_equal</span><span class="p">(</span><span class="n">aspc</span><span class="p">([</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;Db&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">]))</span>
<span class="go">False</span>
</pre></div>
</div>
<p>Use <code class="xref py py-meth docutils literal notranslate"><span class="pre">array_equal</span></code> to test the overall equality of two arrays
as <cite>==</cite> will return element-wise equality.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Note that the ordering of non-class intervals/pitches and interval/pitch classes is different.
Non-class pitches and intervals are ordered diatonically
while pitch/interval classes are ordered on the line of fifths (<a class="reference internal" href="spelled.html#spelled-ordering"><span class="std std-ref">see here</span></a>).</p>
</div>
</section>
<section id="names-and-strings">
<h3>Names and Strings<a class="headerlink" href="#names-and-strings" title="Link to this heading"></a></h3>
<p>Regular spelled types can be converted to a string representation using <code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code>.
Calling <code class="xref py py-func docutils literal notranslate"><span class="pre">str()</span></code> or <cite>py:func:`repr</cite> on spelled arrays also works
but returns one string for the full array.
If you want instead to get an array of strings
(one for each pitch or interval in the original array),
you can use the method <code class="xref py py-func docutils literal notranslate"><span class="pre">name()</span></code>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">unisons</span> <span class="o">=</span> <span class="n">asi</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">21</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">,</span> <span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">12</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unisons</span>
<span class="go">asi([&#39;P1:0&#39;, &#39;a1:0&#39;, &#39;aa1:0&#39;, &#39;aaa1:0&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">unisons</span><span class="p">)</span>
<span class="go">&#39;[P1:0 a1:0 aa1:0 aaa1:0]&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">unisons</span><span class="p">)</span>
<span class="go">[P1:0 a1:0 aa1:0 aaa1:0]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">unisons</span><span class="o">.</span><span class="n">name</span><span class="p">()</span>
<span class="go">array([&#39;P1:0&#39;, &#39;a1:0&#39;, &#39;aa1:0&#39;, &#39;aaa1:0&#39;], dtype=&#39;&lt;U6&#39;)</span>
</pre></div>
</div>
</section>
<section id="special-intervals">
<h3>Special Intervals<a class="headerlink" href="#special-intervals" title="Link to this heading"></a></h3>
<p>For special intervals such as <code class="xref py py-func docutils literal notranslate"><span class="pre">unison()</span></code>,
<code class="xref py py-func docutils literal notranslate"><span class="pre">octave()</span></code>,
and <code class="xref py py-func docutils literal notranslate"><span class="pre">chromatic_semitone()</span></code>,
you now have to provide a shape:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">SpelledIntervalArray</span><span class="o">.</span><span class="n">unison</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
<span class="go">[P1:0 P1:0 P1:0 P1:0 P1:0 P1:0 P1:0 P1:0 P1:0 P1:0 P1:0 P1:0]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">SpelledIntervalClassArray</span><span class="o">.</span><span class="n">chromatic_semitone</span><span class="p">((</span><span class="mi">3</span><span class="p">,</span><span class="mi">5</span><span class="p">)))</span>
<span class="go">[[a1 a1 a1 a1 a1]</span>
<span class="go"> [a1 a1 a1 a1 a1]</span>
<span class="go"> [a1 a1 a1 a1 a1]]</span>
</pre></div>
</div>
</section>
<section id="array-interface">
<h3>Array Interface<a class="headerlink" href="#array-interface" title="Link to this heading"></a></h3>
<p>Spelled arrays support indexing as in <cite>numpy</cite>.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span> <span class="o">=</span> <span class="n">asi</span><span class="p">([</span><span class="s2">&quot;m6:0&quot;</span><span class="p">,</span> <span class="s2">&quot;m7:8&quot;</span><span class="p">,</span> <span class="s2">&quot;dd1:3&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="go">m6:0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
<span class="go">asi([&#39;m7:8&#39;, &#39;dd1:3&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]]</span>
<span class="go">asi([&#39;m7:8&#39;, &#39;dd1:3&#39;, &#39;m7:8&#39;, &#39;dd1:3&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span><span class="p">[[</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="kc">True</span><span class="p">]]</span>
<span class="go">asi([&#39;m6:0&#39;, &#39;dd1:3&#39;])</span>
</pre></div>
</div>
<p>Besides indexing, spelled arrays also support common collection methods
such as <code class="xref py py-func docutils literal notranslate"><span class="pre">len()</span></code>, <code class="docutils literal notranslate"><span class="pre">in</span></code>, or iteration:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">intervals</span><span class="p">)</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledInterval</span><span class="p">(</span><span class="s2">&quot;m7:8&quot;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">intervals</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">intervals</span><span class="p">:</span>
<span class="gp">... </span>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Interval </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s2"> corresponds to interval class </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">ic</span><span class="p">()</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">Interval m6:0 corresponds to interval class m6.</span>
<span class="go">Interval m7:8 corresponds to interval class m7.</span>
<span class="go">Interval dd1:3 corresponds to interval class dd1.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">intervals</span><span class="p">)</span>
<span class="go">[m6:0, m7:8, dd1:3]</span>
</pre></div>
</div>
</section>
<section id="one-hot-encoding">
<h3>One-hot Encoding<a class="headerlink" href="#one-hot-encoding" title="Link to this heading"></a></h3>
<p>Spelled arrays support <a class="reference internal" href="spelled.html#spelled-one-hot"><span class="std std-ref">the same one-hot encoding style as their scalar counterparts</span></a>.
That means that non-class intervals/pitches are encoded using fifths and (independent) octaves
while interval/pitch classes are encoded only in fifths.
Each dimension covers a certain range of fifths/octaves that needs to be known when converting to/from one-hot tensors.
You can create a one-hot tensor using <code class="xref py py-meth docutils literal notranslate"><span class="pre">onehot()</span></code>
and convert it back to a spelled array using <code class="xref py py-meth docutils literal notranslate"><span class="pre">from_onehot()</span></code>.</p>
<p>In addition to the fifth and octave dimensions, one-hot tensors of spelled arrays have additional dimensions
that reflect the original shape of the array.
The fifth (and octave) dimension(s) are the last (two) dimensions in the tensor’s shape,
so for non-class arrays, the shape of the one-hot tensor is <code class="docutils literal notranslate"><span class="pre">original_shape</span> <span class="pre">+</span> <span class="pre">(n_fifths,</span> <span class="pre">n_octaves)</span></code>
while for class arrays, the shape is <code class="docutils literal notranslate"><span class="pre">original_shape</span> <span class="pre">+</span> <span class="pre">(n_fifths,)</span></code>.</p>
<p>Simple example (pitch class array, one array dimension):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pc_onehot</span> <span class="o">=</span> <span class="n">aspc</span><span class="p">([</span><span class="s2">&quot;C&quot;</span><span class="p">,</span> <span class="s2">&quot;G&quot;</span><span class="p">,</span> <span class="s2">&quot;F&quot;</span><span class="p">,</span> <span class="s2">&quot;D&quot;</span><span class="p">,</span> <span class="s2">&quot;Bb&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;Eb&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">onehot</span><span class="p">((</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pc_onehot</span><span class="o">.</span><span class="n">shape</span> <span class="c1"># 7 pitches x 9 fifths (-4 to 4)</span>
<span class="go">(7, 9)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pc_onehot</span>
<span class="go">array([[0, 0, 0, 0, 1, 0, 0, 0, 0],</span>
<span class="go">       [0, 0, 0, 0, 0, 1, 0, 0, 0],</span>
<span class="go">       [0, 0, 0, 1, 0, 0, 0, 0, 0],</span>
<span class="go">       [0, 0, 0, 0, 0, 0, 1, 0, 0],</span>
<span class="go">       [0, 0, 1, 0, 0, 0, 0, 0, 0],</span>
<span class="go">       [0, 0, 0, 0, 0, 0, 0, 1, 0],</span>
<span class="go">       [0, 1, 0, 0, 0, 0, 0, 0, 0]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledPitchClassArray</span><span class="o">.</span><span class="n">from_onehot</span><span class="p">(</span><span class="n">pc_onehot</span><span class="p">,</span> <span class="o">-</span><span class="mi">4</span><span class="p">)</span>
<span class="go">aspc([&#39;C&#39;, &#39;G&#39;, &#39;F&#39;, &#39;D&#39;, &#39;Bb&#39;, &#39;A&#39;, &#39;Eb&#39;])</span>
</pre></div>
</div>
<p>Complex example (interval array, two array dimensions):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span> <span class="o">=</span> <span class="n">asi</span><span class="p">([[</span><span class="s2">&quot;M6:0&quot;</span><span class="p">,</span> <span class="s2">&quot;m3:0&quot;</span><span class="p">,</span> <span class="s2">&quot;M2:1&quot;</span><span class="p">],</span>
<span class="gp">... </span>                 <span class="p">[</span><span class="s2">&quot;-M6:0&quot;</span><span class="p">,</span> <span class="s2">&quot;-m3:0&quot;</span><span class="p">,</span> <span class="s2">&quot;P1:0&quot;</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">intervals</span><span class="p">)</span>
<span class="go">[[M6:0 m3:0 M2:1]</span>
<span class="go"> [-M6:0 -m3:0 P1:0]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i_onehot</span> <span class="o">=</span> <span class="n">intervals</span><span class="o">.</span><span class="n">onehot</span><span class="p">((</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i_onehot</span><span class="o">.</span><span class="n">shape</span> <span class="c1"># 2 rows, 3 columns, 9 fifths (-4 to 4), 3 octaves (-1 to 1)</span>
<span class="go">(2, 3, 9, 3)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i_onehot</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span> <span class="c1"># M2:1: fifth=2 (out of -4 to 4), octave=1 (out of -1 to 1)</span>
<span class="go">array([[0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 1],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SpelledInterval</span><span class="p">(</span><span class="s2">&quot;M2:1&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">onehot</span><span class="p">((</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span>
<span class="go">array([[0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 1],</span>
<span class="go">       [0, 0, 0],</span>
<span class="go">       [0, 0, 0]])</span>
</pre></div>
</div>
</section>
</section>
<section id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Link to this heading"></a></h2>
<section id="general-interface">
<h3>General Interface<a class="headerlink" href="#general-interface" title="Link to this heading"></a></h3>
</section>
<section id="spelled-interval-and-pitch">
<h3>Spelled Interval and Pitch<a class="headerlink" href="#spelled-interval-and-pitch" title="Link to this heading"></a></h3>
</section>
<section id="spelled-interval-and-pitch-class">
<h3>Spelled Interval and Pitch Class<a class="headerlink" href="#spelled-interval-and-pitch-class" title="Link to this heading"></a></h3>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="spelled.html" class="btn btn-neutral float-left" title="Spelled Pitch" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="enharmonic.html" class="btn btn-neutral float-right" title="Enharmonic Pitch" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Robert Lieck, Christoph Finkensiep, DCML.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>